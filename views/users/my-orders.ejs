<%- include('../partials/users/header.ejs') %>
<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Opal Jwels</title>
    <!-- loader-->
    <link href="css/pace.min.css" rel="stylesheet" />
    <script src="js/pace.min.js"></script>
    <!--favicon-->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- simplebar CSS-->
    <link href="plugins/simplebar/css/simplebar.css" rel="stylesheet" />
    <!-- Bootstrap core CSS-->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <!-- animate CSS-->
    <link href="css/animate.css" rel="stylesheet" type="text/css" />
    <!-- Icons CSS-->
    <link href="css/icons.css" rel="stylesheet" type="text/css" />
    <!-- Sidebar CSS-->
    <link href="css/sidebar-menu.css" rel="stylesheet" />
    <!-- Custom Style-->
    <link href="css/app-style.css" rel="stylesheet" />

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">

</head>

<body class="bg-theme bg-theme1">

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="card" style="margin-top: 40px;">
                    <div style="background-color: rgba(4, 80, 99, 0.687);" class="card-body text-center">
                        <h5 class="card-title">Order Details</h5>
                        <div class="table-responsive">
                            <table style="color:black" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">No.</th>
                                        <th scope="col">Product Name</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Order Date</th>
                                        <th scope="col">Details</th>
                                        <th scope="col">Status</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% if (message.length> 0) { %>
                                        <% message.forEach((order, index)=> { %>
                                            <tr>
                                                <td><%= skip+ index + 1 %></td>
                                                <td>
                                                    <% order.product.forEach(item=> { %>
                                                        <%= item.productId.name %>
                                                    <% }) %>
                                                </td>
                                                <td><%= order.product.length %></td>
                                                <td><%= order.date.toISOString().substring(0,10) %></td>
                                                <td><a style="color: black;" href="/singleorderview?id=<%=order._id %>">View Details</a></td>

                                                <% if (order.status=='placed' ) { %>
                                                    <td>Placed</td>
                                                    <td><a style="color:rgb(228, 19, 19);" href="/editorder?id=<%=order._id%>">Cancel</a></td>
                                                <% } %>

                                                <% if (order.status=='req-for-cancellation' ) { %>
                                                    <td>Requested for cancel</td>
                                                    <td>-</td>
                                                <% } %>

                                                <% if (order.status=='cancelled' ) { %>
                                                    <td>Cancelled</td>
                                                    <td>-</td>
                                                <% } %>

                                                <% if (order.status=='delivered' ) { %>
                                                    <td>Shipped</td>
                                                    <td><a style="color:rgb(228, 19, 19);" href="/editorder?id=<%=order._id%>">Return</a></td>
                                                <% } %>

                                                <% if (order.status=='req-for-return' ) { %>
                                                    <td>Requested for return</td>
                                                    <td></td>
                                                <% } %>

                                                <% if (order.status=='returned' ) { %>
                                                    <td>Returned</td>
                                                    <td></td>
                                                <% } %>

                                            </tr>
                                        <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="7">No orders found.</td>
                                        </tr>
                                    <% } %>
                                </tbody>
                            </table>
                        </div>

                       
                    </div>
                </div>
            </div>
            <!-- Continue Shopping button -->
            <div style="margin-top: 50px;margin-bottom: 50px;margin-left: 45%;">
                <button style="background-color: rgba(97, 6, 243, 0.788);">
                    <a href="/shop">CONTINUE SHOPPING</a></button>
            </div>
        </div><!--End Row-->
    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- simplebar js -->
    <script src="plugins/simplebar/js/simplebar.js"></script>
    <!-- sidebar-menu js -->
    <script src="js/sidebar-menu.js"></script>

    <!-- DataTables JavaScript -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

    <!-- Custom scripts -->
    <script src="js/app-script.js"></script>

    <!-- Initialize DataTables -->
    <script>
        $(document).ready(function () {
            $('.table').DataTable();
        });
    </script>

</body>

</html>
